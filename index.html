
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CFD Engineer · Portfolio</title>
  <meta name="description" content="CFD Engineer Portfolio – projects, case studies, and client enquiry form" />
  <style>
    /* ===== CSS RESET ===== */
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0}
    img{display:block;max-width:100%}
    button,input,select,textarea{font:inherit}

    /* ===== THEME ===== */
    :root{
      --bg:#0b0f1a;            /* deep space */
      --card:#0f1526a6;        /* glass */
      --text:#e9f0ff;
      --muted:#a8b2d1;
      --brand:#5cf1ff;         /* cyan */
      --brand-2:#8a6bff;       /* purple */
      --accent:#ffcb6b;        /* warm highlight */
      --good:#39d98a;
      --bad:#ff6b6b;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 20px;
      --blur: 16px;
      --ring: 0 0 0 2px #0000, 0 0 0 8px #0000;
    }

    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 10% 10%, #0f1630 0%, #0b0f1a 40%, #070a12 100%),
                  radial-gradient(900px 600px at 90% -10%, rgba(138,107,255,.25), transparent 70%),
                  radial-gradient(900px 600px at -10% 100%, rgba(92,241,255,.25), transparent 70%),
                  #0b0f1a;
      min-height: 100dvh;
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Subtle animated grid */
    body::before{
      content:""; position: fixed; inset:0; pointer-events:none;
      background: linear-gradient(transparent 95%, rgba(255,255,255,.05) 100%) 0 0/ 40px 40px,
                  linear-gradient(90deg, transparent 95%, rgba(255,255,255,.05) 100%) 0 0/ 40px 40px;
      transform: translateZ(0);
      animation: drift 30s linear infinite;
      opacity:.25;
    }
    @keyframes drift{to{transform: translateY(40px)}}

    .container{max-width:1200px; margin-inline:auto; padding: 32px 20px 80px}

    /* ===== NAV ===== */
    .nav{
      position: sticky; top: 0; z-index:100;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(15,21,38,.9), rgba(15,21,38,.4));
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .nav .inner{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:12px 20px}
    .brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:var(--text)}
    .logo{width:36px; height:36px; border-radius:12px; background: conic-gradient(from 0deg, var(--brand), var(--brand-2), var(--accent), var(--brand)); box-shadow:0 0 0 2px rgba(255,255,255,.08) inset, 0 8px 30px rgba(138,107,255,.35);}
    .brand span{font-weight:700; letter-spacing:.4px}
    .nav a.link{color:var(--muted); text-decoration:none; padding:8px 12px; border-radius:12px}
    .nav a.link:hover{color:var(--text); background: rgba(255,255,255,.06)}

    /* ===== HERO ===== */
    .hero{display:grid; grid-template-columns: 1.2fr .8fr; gap:26px; align-items:center; margin-top:28px}
    .hero-card{
      padding:28px; border-radius: var(--radius); background: linear-gradient(180deg, rgba(15,21,38,.8), rgba(15,21,38,.4));
      box-shadow: var(--shadow);
      border:1px solid rgba(255,255,255,.08);
      position:relative; overflow:hidden; perspective:1200px; transform-style:preserve-3d;
    }
    .hero h1{font-size: clamp(28px, 3.6vw, 48px); line-height:1.1; margin:0 0 10px}
    .hero p{color:var(--muted); margin:0 0 18px}

    .chips{display:flex; flex-wrap:wrap; gap:10px; margin:20px 0}
    .chip{padding:8px 12px; border-radius:999px; background: rgba(92,241,255,.1); color: var(--brand); border:1px solid rgba(92,241,255,.35)}
    .chip.alt{background: rgba(138,107,255,.12); color: var(--text); border-color: rgba(138,107,255,.35)}

    .cta{display:flex; gap:12px; flex-wrap:wrap}
    .btn{cursor:pointer; padding:12px 16px; border-radius:14px; border:1px solid rgba(255,255,255,.12); background:linear-gradient(180deg, rgba(92,241,255,.25), rgba(92,241,255,.05)); color:#eaffff; text-decoration:none; box-shadow: var(--shadow)}
    .btn.secondary{background: transparent; color:var(--text)}
    .btn:hover{transform: translateY(-1px)}

    .hero-vis{
      height: 320px; border-radius: var(--radius); position:relative; overflow:hidden; isolation:isolate; transform: translateZ(0);
      background: radial-gradient(600px 300px at 70% 30%, rgba(92,241,255,.25), transparent 60%),
                  radial-gradient(600px 300px at 20% 80%, rgba(138,107,255,.25), transparent 60%),
                  linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
      border:1px solid rgba(255,255,255,.08);
      box-shadow: var(--shadow);
    }

    /* 3D flowing particles to give a CFD vibe */
    .bubble{position:absolute; border-radius:50%; filter: blur(1px); mix-blend-mode:screen; opacity:.9}
    .bubble:nth-child(odd){background: radial-gradient(circle at 30% 30%, rgba(92,241,255,.95), rgba(92,241,255,.1));}
    .bubble:nth-child(even){background: radial-gradient(circle at 70% 70%, rgba(138,107,255,.95), rgba(138,107,255,.1));}
    @keyframes rise{0%{transform: translate3d(var(--x), 120%, 0) scale(.6);} 100%{transform: translate3d(calc(var(--x) + 40px), -20%, 0) scale(1.1);}}

    /* ===== SECTION HEAD ===== */
    .section{margin-top:56px}
    .section h2{font-size: clamp(22px, 2.4vw, 32px); margin:0 0 12px}
    .section p.lead{color:var(--muted); margin-top:0}

    /* ===== CONTROLS ===== */
    .controls{display:flex; flex-wrap:wrap; gap:10px; margin:18px 0 10px}
    .input, .select{
      appearance:none; border:1px solid rgba(255,255,255,.14); background: rgba(15,21,38,.6); color:var(--text);
      padding:10px 12px; border-radius:12px; min-width: 220px; outline: none;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
    }
    .input::placeholder{color:#97a2c4}

    /* ===== PROJECTS GRID ===== */
    .grid{display:grid; grid-template-columns: repeat(12, 1fr); gap:16px}
    .card{grid-column: span 4; min-height: 260px; position:relative; border-radius:18px; overflow:hidden; background: var(--card); border:1px solid rgba(255,255,255,.08); box-shadow: var(--shadow); transform-style:preserve-3d}
    .card .thumb{position:absolute; inset:0; background-size: cover; background-position:center; opacity:.85; filter: saturate(1.2) contrast(1.05)}
    .card .overlay{position:absolute; inset:auto 0 0 0; padding:16px; background: linear-gradient(180deg, rgba(0,0,0,0), rgba(11,15,26,.9));}
    .tag{position:absolute; top:12px; left:12px; background: rgba(0,0,0,.45); color:#e1ecff; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.18); font-size:12px}
    .meta{display:flex; justify-content:space-between; align-items:center; gap:6px; font-size:12px; color:#c6d0f7}
    .title{font-weight:700; margin:6px 0 8px}
    .actions{display:flex; gap:8px}
    .tiny{font-size:12px; color:#b1bee6}
    .btn.small{padding:8px 10px; border-radius:10px}

    /* ===== MODAL ===== */
    .modal{position:fixed; inset:0; display:none; place-items:center; background: rgba(3,6,12,.65); backdrop-filter: blur(10px); padding:20px}
    .modal.open{display:grid}
    .sheet{width:min(900px, 96vw); background:linear-gradient(180deg, rgba(16,22,40,.98), rgba(16,22,40,.75)); border:1px solid rgba(255,255,255,.1); border-radius:22px; box-shadow: var(--shadow); overflow:hidden}
    .sheet header{display:flex; align-items:center; justify-content:space-between; padding:16px 18px; border-bottom:1px solid rgba(255,255,255,.08)}
    .sheet main{display:grid; grid-template-columns: .9fr 1.1fr; gap:18px; padding:18px}
    .sheet footer{padding:14px 18px; background: rgba(255,255,255,.03); border-top:1px solid rgba(255,255,255,.06); display:flex; justify-content:flex-end; gap:10px}

    .stat{display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:12px}
    .stat .box{padding:10px 12px; border-radius:12px; background: rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.06)}

    /* ===== CONTACT / ENQUIRY ===== */
    .contact{display:grid; grid-template-columns: .9fr 1.1fr; gap:18px}
    form .row{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
    form .row + .row{margin-top:12px}
    label{display:block; font-size:12px; color:#aeb8db; margin:6px 2px}
    input,textarea,select{width:100%; padding:12px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.14); background: rgba(15,21,38,.65); color:var(--text)}
    textarea{min-height:120px; resize:vertical}
    .note{font-size:12px; color:#9aa6ce}

    /* ===== FOOTER ===== */
    .footer{margin-top:56px; padding:24px 0; color:#a8b2d1; border-top:1px solid rgba(255,255,255,.08)}

    /* ===== RESPONSIVE ===== */
    @media (max-width: 980px){
      .hero{grid-template-columns: 1fr;}
      .sheet main, .contact{grid-template-columns:1fr}
      .card{grid-column: span 6}
    }
    @media (max-width: 640px){
      .card{grid-column: span 12}
      form .row{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <nav class="nav">
    <div class="inner container">
      <a class="brand" href="#top" aria-label="Home">
        <div class="logo" aria-hidden="true"></div>
        <span>CFD Engineer</span>
      </a>
      <div>
        <a class="link" href="#projects">Projects</a>
        <a class="link" href="#capabilities">Capabilities</a>
        <a class="link" href="#enquiry">Client Enquiry</a>
      </div>
    </div>
  </nav>

  <header class="container hero" id="top">
    <section class="hero-card" id="tilt">
      <h1>Computational Fluid Dynamics Portfolio</h1>
      <p>I help teams validate designs faster with high‑fidelity CFD: aerodynamics, thermal management, and multiphase flows. From meshing to validation – end to end.</p>
      <div class="chips">
        <span class="chip">Aerodynamics</span>
        <span class="chip alt">Thermal</span>
        <span class="chip">Turbulence (RANS/LES)</span>
        <span class="chip alt">Multiphase</span>
        <span class="chip">Optimization</span>
      </div>
      <div class="cta">
        <a class="btn" href="#projects">View Projects</a>
        <a class="btn secondary" href="#enquiry">Request a Quote</a>
      </div>
      <div class="note">Available for freelance & full‑time collaborations.</div>
    </section>

    <aside class="hero-vis" aria-hidden="true" id="flow">
      <!-- Bubbles are injected by JS -->
    </aside>
  </header>

  <main class="container">
    <section class="section" id="projects">
      <h2>Selected Projects</h2>
      <p class="lead">Case studies with mesh details, solver setups, and validation metrics.</p>

      <div class="controls">
        <input class="input" id="search" placeholder="Search projects (e.g., radiator, wing, HVAC)" />
        <select class="select" id="filter">
          <option value="all">All disciplines</option>
          <option value="aero">Aerodynamics</option>
          <option value="thermal">Thermal</option>
          <option value="multiphase">Multiphase</option>
          <option value="hvac">HVAC</option>
        </select>
        <select class="select" id="sort">
          <option value="date">Sort by date (newest)</option>
          <option value="name">Sort by name (A–Z)</option>
        </select>
      </div>

      <div class="grid" id="grid"></div>
    </section>

    <section class="section" id="capabilities">
      <h2>Capabilities</h2>
      <p class="lead">Pre‑processing to validation. I use OpenFOAM, ANSYS Fluent, STAR‑CCM+, and Python for automation.</p>
      <div class="grid">
        <div class="card" style="grid-column: span 6; padding:18px">
          <h3>Meshing & Geometry</h3>
          <ul class="tiny">
            <li>Watertight geometry repair, defeature, shrink‑wrap</li>
            <li>Hex/tris/prism layers, y+ targeting, mesh independence</li>
            <li>Automated parametric studies via templates</li>
          </ul>
        </div>
        <div class="card" style="grid-column: span 6; padding:18px">
          <h3>Solvers & Models</h3>
          <ul class="tiny">
            <li>Steady & transient RANS, DES/LES where justified</li>
            <li>Conjugate heat transfer, species, radiation</li>
            <li>VOF, DPM, porous media, moving mesh (AMI)</li>
          </ul>
        </div>
        <div class="card" style="grid-column: span 6; padding:18px">
          <h3>Post‑Processing</h3>
          <ul class="tiny">
            <li>Forces, moments, Cp/Cf maps, streamlines, pathlines</li>
            <li>Uncertainty quantification, validation vs. test</li>
            <li>Report automation (Python, LaTeX, PowerPoint)</li>
          </ul>
        </div>
        <div class="card" style="grid-column: span 6; padding:18px">
          <h3>Optimization</h3>
          <ul class="tiny">
            <li>DoE, surrogate modeling, gradient‑free search</li>
            <li>Parametric sweeps and design space exploration</li>
            <li>Cloud & on‑prem batch pipelines</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="section" id="enquiry">
      <h2>Client Enquiry</h2>
      <p class="lead">Tell me about your problem. I’ll respond with a plan, scope, and quote.</p>

      <div class="contact">
        <div class="card" style="padding:18px">
          <form id="enquiryForm">
            <div class="row">
              <div>
                <label for="name">Your name</label>
                <input id="name" name="name" placeholder="Jane Doe" required />
              </div>
              <div>
                <label for="email">Email</label>
                <input id="email" name="email" type="email" placeholder="jane@company.com" required />
              </div>
            </div>
            <div class="row">
              <div>
                <label for="company">Company</label>
                <input id="company" name="company" placeholder="Acme Aero" />
              </div>
              <div>
                <label for="discipline">Discipline</label>
                <select id="discipline" name="discipline">
                  <option>Aerodynamics</option>
                  <option>Thermal</option>
                  <option>Multiphase</option>
                  <option>HVAC</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div>
                <label for="budget">Budget (USD)</label>
                <input id="budget" name="budget" type="number" min="0" placeholder="10000" />
              </div>
              <div>
                <label for="timeline">Timeline</label>
                <select id="timeline" name="timeline">
                  <option>1–2 weeks</option>
                  <option>3–6 weeks</option>
                  <option>7–12 weeks</option>
                  <option>Flexible</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div style="grid-column: 1 / -1">
                <label for="message">Project details</label>
                <textarea id="message" name="message" placeholder="Geometry type, operating conditions, success metrics, deadlines…" required></textarea>
              </div>
            </div>
            <div class="row">
              <div>
                <label for="nda">
                  <input id="nda" type="checkbox" /> NDA required
                </label>
              </div>
            </div>
            <div class="row">
              <button type="submit" class="btn">Generate Summary</button>
              <button type="reset" class="btn secondary">Reset</button>
            </div>
            <p class="note">This form does not send emails (frontend only). It generates a structured brief you can copy & email.</p>
          </form>
        </div>

        <div class="card" style="padding:18px">
          <h3>Enquiry Summary</h3>
          <p class="tiny">Copy this and send it by email.</p>
          <pre id="summary" style="white-space:pre-wrap; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.06); padding:12px; border-radius:12px; min-height:200px"></pre>
          <div class="actions">
            <button class="btn small" id="copy">Copy</button>
            <span id="copied" class="tiny" aria-live="polite"></span>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer container">
      <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap">
        <div>© <span id="year"></span> CFD Engineer — Built with HTML/CSS/JS</div>
        <div class="tiny">Keywords: OpenFOAM, Fluent, STAR‑CCM+, Python automation</div>
      </div>
    </footer>
  </main>

  <!-- ===== MODAL TEMPLATE ===== -->
  <dialog class="modal" id="modal" aria-modal="true" aria-labelledby="modalTitle">
    <div class="sheet">
      <header>
        <strong id="modalTitle">Project</strong>
        <button class="btn small secondary" id="closeModal">Close</button>
      </header>
      <main>
        <div>
          <img id="modalImg" alt="Project visualization" style="width:100%; border-radius:14px; border:1px solid rgba(255,255,255,.08)" />
          <div class="stat">
            <div class="box"><div class="tiny">Mesh cells</div><div id="modalMesh">—</div></div>
            <div class="box"><div class="tiny">Model</div><div id="modalModel">—</div></div>
            <div class="box"><div class="tiny">Solver</div><div id="modalSolver">—</div></div>
            <div class="box"><div class="tiny">Validation</div><div id="modalValidation">—</div></div>
          </div>
        </div>
        <div>
          <h3 id="modalName" style="margin-top:0">—</h3>
          <p id="modalDesc" class="tiny">—</p>
          <div class="actions">
            <a class="btn" id="modalCta" href="#enquiry">Enquire about similar work</a>
          </div>
        </div>
      </main>
      <footer>
        <button class="btn small secondary" id="closeFooter">Close</button>
      </footer>
    </div>
  </dialog>

  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // CFD bubbles (3D-ish flow)
    const flow = document.getElementById('flow');
    for (let i=0;i<22;i++){
      const b=document.createElement('div');
      b.className='bubble';
      const size = Math.floor(Math.random()*28)+18;
      b.style.width=b.style.height=size+'px';
      b.style.left=Math.random()*100+'%';
      b.style.setProperty('--x', (Math.random()*120-60)+'px');
      b.style.animation = `rise ${18 + Math.random()*16}s linear ${-Math.random()*20}s infinite`;
      flow.appendChild(b);
    }

    // Projects data
    const projects = [
      { id:1, name:'EV Battery Pack – Thermal Runaway Mitigation', tag:'thermal', date:'2025-06-01', mesh:'21.4M', model:'CHT + Radiation', solver:'Fluent', validation:'ΔT < 2.1°C vs test',
        desc:'Transient CHT to size cooling channels and vent paths; included joule heating and anisotropic materials.',
        img:'data:image/svg+xml;utf8,' + encodeURIComponent(svgThumb('#4bd6ff','#6b57ff')) },
      { id:2, name:'UAV Wing – Low‑Re CL Airfoil Study', tag:'aero', date:'2025-03-11', mesh:'14.2M', model:'k‑ω SST (γ‑Reθ)', solver:'OpenFOAM', validation:'Cl/Cd ±3% vs tunnel',
        desc:'Parametric sweep on flap deflection; transition modeling via γ‑Reθ; mesh independence achieved.',
        img:'data:image/svg+xml;utf8,' + encodeURIComponent(svgThumb('#5cf1ff','#ffcb6b')) },
      { id:3, name:'Separator Tank – Multiphase VOF', tag:'multiphase', date:'2024-12-20', mesh:'9.6M', model:'VOF + Surface Tension', solver:'STAR‑CCM+', validation:'Phase split 97.2%',
        desc:'Transient VOF with adaptive timestep; baffles optimized for residence time and separation efficiency.',
        img:'data:image/svg+xml;utf8,' + encodeURIComponent(svgThumb('#8a6bff','#4bd6ff')) },
      { id:4, name:'Data Center – Room‑scale HVAC', tag:'hvac', date:'2024-08-14', mesh:'31.8M', model:'RANS + Porous Media', solver:'Fluent', validation:'Rack inlet ΔT < 1.5°C',
        desc:'CRAC layout and perforated tile optimization using porous resistance models; containment study.',
        img:'data:image/svg+xml;utf8,' + encodeURIComponent(svgThumb('#6b57ff','#ffcb6b')) },
      { id:5, name:'Rear Diffuser – Automotive Aero', tag:'aero', date:'2024-05-20', mesh:'18.9M', model:'k‑ε realizable', solver:'OpenFOAM', validation:'‑12.4% Cd, +8.1% Cl',
        desc:'Transient wake control with base bleed concept; force coefficients and tuft correlation.',
        img:'data:image/svg+xml;utf8,' + encodeURIComponent(svgThumb('#ffcb6b','#5cf1ff')) },
      { id:6, name:'Heat Exchanger – Maldistribution', tag:'thermal', date:'2023-11-02', mesh:'12.7M', model:'Species + CHT', solver:'Fluent', validation:'UA ±4.5%',
        desc:'Header redesign for flow uniformity; evaluated fin pitch and turbulence promoter options.',
        img:'data:image/svg+xml;utf8,' + encodeURIComponent(svgThumb('#4bd6ff','#8a6bff')) },
    ];

    // Generate SVG thumbnail (keeps single-file, no external images)
    function svgThumb(c1, c2){
      return `<?xml version='1.0' encoding='UTF-8'?>
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 800'>
        <defs>
          <linearGradient id='g' x1='0' y1='0' x2='1' y2='1'>
            <stop offset='0' stop-color='${c1}' stop-opacity='.9'/>
            <stop offset='1' stop-color='${c2}' stop-opacity='.9'/>
          </linearGradient>
        </defs>
        <rect width='1200' height='800' fill='#0b0f1a'/>
        <g opacity='.75'>
          <path d='M0 500 C 200 350, 450 700, 700 550 S 1100 250, 1200 400' stroke='url(#g)' stroke-width='60' fill='none'/>
          <path d='M0 650 C 250 450, 500 850, 850 650 S 1100 300, 1200 450' stroke='url(#g)' stroke-width='40' fill='none' opacity='.6'/>
          <circle cx='300' cy='260' r='90' fill='${c1}' opacity='.35'/>
          <circle cx='980' cy='540' r='120' fill='${c2}' opacity='.28'/>
        </g>
      </svg>`;
    }

    // Render projects
    const grid = document.getElementById('grid');
    function render(){
      const q = document.getElementById('search').value.toLowerCase();
      const f = document.getElementById('filter').value;
      const s = document.getElementById('sort').value;
      let list = projects.filter(p => (f==='all' || p.tag===f) && (!q || JSON.stringify(p).toLowerCase().includes(q)));
      if(s==='date') list.sort((a,b)=> new Date(b.date)-new Date(a.date));
      if(s==='name') list.sort((a,b)=> a.name.localeCompare(b.name));

      grid.innerHTML = '';
      list.forEach(p=> grid.appendChild(card(p)));
    }

    function card(p){
      const el = document.createElement('article');
      el.className='card tilt';
      el.setAttribute('tabindex','0');
      el.innerHTML = `
        <div class="thumb" style="background-image:url('${p.img}')"></div>
        <span class="tag">${label(p.tag)}</span>
        <div class="overlay">
          <div class="meta tiny"><span>${formatDate(p.date)}</span><span>${p.mesh} • ${p.solver}</span></div>
          <div class="title">${p.name}</div>
          <div class="actions">
            <button class="btn small" data-open="${p.id}">View</button>
            <a class="btn small secondary" href="#enquiry">Enquire</a>
          </div>
        </div>`;
      // 3D tilt effect per card
      enableTilt(el);
      // open modal
      el.querySelector('[data-open]')?.addEventListener('click',()=> openModal(p));
      return el;
    }

    function label(tag){
      return {aero:'Aerodynamics', thermal:'Thermal', multiphase:'Multiphase', hvac:'HVAC'}[tag] || tag;
    }

    function formatDate(s){
      const d = new Date(s);
      return d.toLocaleDateString(undefined,{year:'numeric', month:'short'});
    }

    // 3D tilt for hero + cards
    function enableTilt(el){
      const rect = ()=> el.getBoundingClientRect();
      el.style.transform = 'perspective(900px)';
      el.addEventListener('mousemove', (e)=>{
        const r = rect();
        const x = (e.clientX - r.left)/r.width - .5;
        const y = (e.clientY - r.top)/r.height - .5;
        el.style.transform = `perspective(900px) rotateX(${(-y*6).toFixed(2)}deg) rotateY(${(x*8).toFixed(2)}deg) translateZ(0)`;
      });
      el.addEventListener('mouseleave', ()=>{ el.style.transform='perspective(900px) rotateX(0deg) rotateY(0deg)'; });
    }
    enableTilt(document.getElementById('tilt'));

    // Modal logic
    const modal = document.getElementById('modal');
    function openModal(p){
      document.getElementById('modalTitle').textContent = p.name;
      document.getElementById('modalName').textContent = p.name;
      document.getElementById('modalDesc').textContent = p.desc;
      document.getElementById('modalMesh').textContent = p.mesh;
      document.getElementById('modalModel').textContent = p.model;
      document.getElementById('modalSolver').textContent = p.solver;
      document.getElementById('modalValidation').textContent = p.validation;
      document.getElementById('modalImg').src = p.img;
      modal.classList.add('open');
    }
    document.getElementById('closeModal').onclick = ()=> modal.classList.remove('open');
    document.getElementById('closeFooter').onclick = ()=> modal.classList.remove('open');
    modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.classList.remove('open'); });

    // Controls
    ['search','filter','sort'].forEach(id=> document.getElementById(id).addEventListener('input', render));
    render();

    // Enquiry form -> summary
    const form = document.getElementById('enquiryForm');
    const summary = document.getElementById('summary');
    const copyBtn = document.getElementById('copy');
    const copied = document.getElementById('copied');

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      const data = Object.fromEntries(new FormData(form).entries());
      const wantsNDA = document.getElementById('nda').checked ? 'Yes' : 'No';
      const text = `CFD Project Brief\n\n`+
        `Contact: ${data.name || '—'} <${data.email || '—'}>\n`+
        `Company: ${data.company || '—'}\n`+
        `Discipline: ${data.discipline || '—'}\n`+
        `Budget: ${data.budget || '—'} USD\n`+
        `Timeline: ${data.timeline || '—'}\n`+
        `NDA required: ${wantsNDA}\n\n`+
        `Details:\n${data.message || '—'}`;
      summary.textContent = text;
      copied.textContent = 'Summary generated.';
      setTimeout(()=> copied.textContent='', 2200);
    });

    copyBtn.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(summary.textContent);
        copied.textContent = 'Copied!';
      }catch(err){
        copied.textContent = 'Select and press Ctrl/Cmd+C';
      }
      setTimeout(()=> copied.textContent='', 1800);
    });
  </script>
</body>
</html>


